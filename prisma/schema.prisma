generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

model Confession {
  id  String @id @default(uuid())

  text  String?
  audioUrl  String?

  creatorId  String

  likes ConfessionLike[] @relation(name: "Confession")
  comments ConfessionComment[] @relation(name: "ConfessionCommentRoot")

  postedAt  DateTime @default(now())
}

model ConfessionLike {
  id  String @id @default(uuid())

  creatorId String

  confession  Confession @relation(name: "Confession", fields: [confessionId], references: [id])
  confessionId  String

  createdAt   DateTime @default(now())
}

model ConfessionComment {
  id  String @id @default(uuid())

  creatorId String

  confession  Confession @relation(name: "ConfessionCommentRoot", fields: [confessionId], references: [id])
  confessionId  String

  createdAt   DateTime @default(now())
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}
